(this.webpackJsonphomework=this.webpackJsonphomework||[]).push([[0],{43:function(e,t,a){},44:function(e,t,a){},68:function(e,t,a){"use strict";a.r(t);var n=a(1),r=a(0),s=a.n(r),c=a(30),o=a.n(c),i=(a(43),a(9)),u=a(2),l=(a(44),a(11)),d=a.n(l),p=a(15),b=a(13),h=a.n(b);function j(e,t){return m.apply(this,arguments)}function m(){return(m=Object(p.a)(d.a.mark((function e(t,a){var n,r,s,c;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t({type:"REQUEST_LOGIN"}),e.next=4,h.a.get("https://swapi.dev/api/people?search="+a.username);case 4:if(n=e.sent,r=n.data.results,!(s=r.filter((function(e){return e.name===a.username&&e.birth_year===a.password})))){e.next=12;break}return c={username:s[0].name},t({type:"LOGIN_SUCCESS",payload:{user:c}}),localStorage.setItem("isLoggedIn",!0),e.abrupt("return",c);case 12:return t({type:"LOGIN_ERROR",error:"Invalid username or password"}),e.abrupt("return");case 16:e.prev=16,e.t0=e.catch(0),t({type:"LOGIN_ERROR",error:e.t0});case 19:case"end":return e.stop()}}),e,null,[[0,16]])})))).apply(this,arguments)}function O(){return(O=Object(p.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t({type:"LOGOUT"}),localStorage.removeItem("isLoggedIn");case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var x=a(12),f=a(4),v={isLoggedIn:localStorage.getItem("isLoggedIn"),user:"",loading:!1,errorMessage:null},g=function(e,t){switch(t.type){case"REQUEST_LOGIN":return Object(f.a)(Object(f.a)({},e),{},{loading:!0});case"LOGIN_SUCCESS":return Object(f.a)(Object(f.a)({},e),{},{user:t.payload.user,loading:!1});case"LOGOUT":return Object(f.a)(Object(f.a)({},e),{},{user:""});case"LOGIN_ERROR":return Object(f.a)(Object(f.a)({},e),{},{loading:!1,errorMessage:t.error});default:throw new Error("Unhandled action type: ".concat(t.type))}},w=s.a.createContext(),y=s.a.createContext();function N(){var e=s.a.useContext(w);if(void 0===e)throw new Error("useAuthState must be used within a AuthProvider");return e}function S(){var e=s.a.useContext(y);if(void 0===e)throw new Error("useAuthDispatch must be used within a AuthProvider");return e}var I=function(e){var t=e.children,a=Object(r.useReducer)(g,v),s=Object(x.a)(a,2),c=s[0],o=s[1];return Object(n.jsx)(w.Provider,{value:c,children:Object(n.jsx)(y.Provider,{value:o,children:t})})},L=function(e){var t=S(),a=N().user;return Object(n.jsx)("div",{className:"border-1 card mx-auto mt-4 p-4 shadow-sm w-50 w-fixed-25 rounded",style:{width:"25rem"},children:Object(n.jsxs)("div",{className:"card-body",children:[Object(n.jsxs)("h5",{className:"card-title my-3 text-center",children:["Welcome ",a.username]}),Object(n.jsxs)("div",{className:"d-flex justify-content-between",children:[Object(n.jsx)(i.b,{to:"/search",className:"card-link btn btn-outline-info",children:"Search Planets"}),Object(n.jsx)("button",{className:"card-link btn btn-outline-info",onClick:function(){!function(e){O.apply(this,arguments)}(t),e.history.push("/login")},children:"Logout"})]})]})})},k=function(e){var t=Object(r.useState)(""),a=Object(x.a)(t,2),s=a[0],c=a[1],o=Object(r.useState)(""),i=Object(x.a)(o,2),u=i[0],l=i[1],b=S(),h=N(),m=(h.loading,h.errorMessage,function(){var t=Object(p.a)(d.a.mark((function t(a){var n;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a.preventDefault(),u.length>0&&s.length>0){t.next=3;break}return t.abrupt("return");case 3:return n={username:u,password:s},t.prev=4,t.next=7,j(b,n);case 7:if(t.sent.username){t.next=10;break}return t.abrupt("return");case 10:e.history.push("/home"),t.next=16;break;case 13:t.prev=13,t.t0=t.catch(4),console.error(t.t0);case 16:case"end":return t.stop()}}),t,null,[[4,13]])})));return function(e){return t.apply(this,arguments)}}());return Object(n.jsxs)("div",{className:"border-1 card mx-auto mt-4 p-4 shadow-sm w-25 w-fixed-25 rounded",children:[Object(n.jsx)("h5",{className:"card-title text-center font-weight-bold",children:"Login"}),Object(n.jsxs)("form",{onSubmit:m,children:[Object(n.jsxs)("div",{className:"form-group",children:[Object(n.jsx)("label",{htmlFor:"username",children:"Username"}),Object(n.jsx)("input",{type:"text",className:"form-control",value:u,"aria-describedby":"emailHelp",onChange:function(e){return l(e.target.value)}})]}),Object(n.jsxs)("div",{className:"form-group",children:[Object(n.jsx)("label",{htmlFor:"password",children:"Password"}),Object(n.jsx)("input",{type:"password",value:s,className:"form-control",onChange:function(e){return c(e.target.value)}})]}),Object(n.jsx)("button",{type:"submit",className:"btn  btn-lg btn-block btn-outline-info",children:"Login"})]})]})},C=function(e){var t=Object(u.g)().id,a=Object(r.useState)({}),s=Object(x.a)(a,2),c=s[0],o=s[1];return Object(r.useEffect)((function(){return h.a.get("http://swapi.dev/api/planets/".concat(t,"/")).then((function(e){o(e.data)})),function(){console.log("cleanup")}}),[t]),Object(n.jsx)("div",{className:"border-1 card mx-auto mt-4 p-4 shadow-sm w-50 w-fixed-25 rounded",style:{width:"25rem"},children:Object(n.jsxs)("div",{className:"card-body",children:[Object(n.jsx)("h5",{className:"card-title my-3 text-center",children:c.name}),Object(n.jsxs)("h6",{className:"card-subtitle my-2 text-muted",children:["Terrain: ",c.terrain]}),Object(n.jsxs)("h6",{className:"card-subtitle my-2 text-muted",children:["Climate: ",c.climate]}),Object(n.jsxs)("h6",{className:"card-subtitle my-2 text-muted",children:["Population: ",c.population]})]})})},E=a(32),P=a(33),R=a(37),G=a(36),U=a(34),_=[{path:"/login",component:k,isPrivate:!1},{path:"/search",component:function(e){Object(R.a)(a,e);var t=Object(G.a)(a);function a(e){var r;return Object(E.a)(this,a),(r=t.call(this,e)).getSizeBg=function(e){return 1e4<=e&&e<=1e5?"p-1":1e5<=e&&e<=1e6?"p-2":1e5<=e&&e<=1e6?"p-3":1e5<=e&&e<=1e6?"p-4":1e5<=e&&e<=1e6?"p-5":1e5<=e&&e<=1e6?"p-6":1e5<=e&&e<=1e6?"p-7":"p-8"},r.handleChange=function(e){r.setState(Object(f.a)(Object(f.a)({},r.state),{},{query:e.target.value}),(function(){r.debauncedEvent(1)}))},r.getData=function(e){var t=r.state.query;h.a.get("".concat("https://swapi.dev/api/planets","/?search=").concat(t,"&page=").concat(e)).then((function(e){var t=e.data.next;t&&(t=(t=t.split("/"))[t.length-1].match(/page=(\d)/));var a=e.data.results.sort((function(e,t){return parseInt(e.population)<parseInt(t.population)?-1:parseInt(e.population)>parseInt(t.population)?1:0}));r.setState(Object(f.a)(Object(f.a)({},r.state),{},{result:a,page:t?t[1]:r.state.page}))}))},r.showResults=function(){var e=r.state.result;if(e&&e.length)return Object(n.jsx)("div",{className:"list-group list-group-flush mb-3 w-fixed-25 w-25 mx-auto",children:e.map((function(e,t){var a=e.url.split("/");a=a[a.length-2];var s=r.getSizeBg(parseInt(e.population));return Object(n.jsx)(i.b,{to:"/planets/".concat(a),className:"list-group-item list-group-item-action ".concat(s),children:e.name},t)}))})},r.state={query:"",result:[],loading:!1,requets:0,page:1},r.debauncedEvent=Object(U.debounce)(r.getData,300),r}return Object(P.a)(a,[{key:"render",value:function(){var e=this.state.query;return Object(n.jsxs)("div",{className:"container",children:[Object(n.jsx)("form",{className:"mt-5",children:Object(n.jsxs)("div",{className:"input-group mb-3 w-fixed-25 w-25 mx-auto",children:[Object(n.jsx)("input",{type:"text",className:"form-control",placeholder:"Search here",value:e,onChange:this.handleChange}),Object(n.jsx)("div",{className:"input-group-append",children:Object(n.jsx)("button",{className:"btn btn-outline-secondary",type:"button",id:"button-addon2",children:Object(n.jsx)("i",{className:"fa fa-search","aria-hidden":"true"})})})]})}),Object(n.jsx)("div",{children:this.showResults()})]})}}]),a}(r.Component),isPrivate:!0},{path:"/planets/:id",component:C,isPrivate:!0},{path:"/",component:L,isPrivate:!0}],q=a(35),A=function(e){var t=e.component,a=e.path,r=e.isPrivate,s=(Object(q.a)(e,["component","path","isPrivate"]),localStorage.getItem("isLoggedIn")),c=r&&!s;return Object(n.jsx)(u.b,{path:a,render:function(e){return c?Object(n.jsx)(u.a,{to:{pathname:"/login"}}):Object(n.jsx)(t,Object(f.a)({},e))}})},T=function(){return Object(n.jsx)(I,{children:Object(n.jsxs)(i.a,{children:[Object(n.jsxs)("nav",{className:"navbar navbar-expand-lg navbar-dark bg-nav",children:[Object(n.jsxs)("h1",{className:"navbar-brand ml-5 font-weight-bolder",children:[" ",Object(n.jsx)(i.b,{to:"/home",children:" SWAPI"})]}),Object(n.jsx)(i.b,{to:"/login",className:"btn ml-auto mr-3 text-light btn-outline-info",children:"Login"})]}),Object(n.jsx)(u.d,{children:_.map((function(e){return Object(n.jsx)(A,{path:e.path,isPrivate:e.isPrivate,component:e.component},e.path)}))})]})})};o.a.render(Object(n.jsx)(s.a.StrictMode,{children:Object(n.jsx)(T,{})}),document.getElementById("root"))}},[[68,1,2]]]);
//# sourceMappingURL=main.ac07cf1f.chunk.js.map